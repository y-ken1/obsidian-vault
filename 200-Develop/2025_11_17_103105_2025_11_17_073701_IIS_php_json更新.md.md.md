---
aliases:
  - 
tags: 
  - 
created:
  - 2025-11-17 10:31:05
---

# 2025_11_17_073701_IIS_php_json更新.md

#### IISの有効化
1. Windowsの機能の有効化または無効化」を開く
2. 「インターネット インフォメーション サービス」にチェック
3. 「World Wide Web サービス」 → 「アプリケーション開発機能」 →**CGI** にチェック
4. 「OK」を押してインストール

#### PHP の準備
1. [PHP公式サイト](https://www.php.net/downloads) から **Thread 
2.  ZIPを `C:\php` に展開
3.  PHPディレクトリに `php.ini` を作る（`php.ini-development` をコピーして `php.ini` にリネーム）
4. 必要なら `extension_dir = "ext"` を設定

#### IISにPHPを登録
- IIS マネージャーを開く (inetmgr)
- 左のツリーで「Default Web Site既定のWebサイト」を選択    
- **ハンドラーマッピング** → 「右機能を開く」→「モジュールマッピングの追加」
    - 要求パス: `*.php`
    - モジュール: `FastCgiModule`
    - 実行ファイル: `C:\php\php-cgi.exe      (php置いたフォルダ)  
    - 名前: `PHP via FastCGI`        
- OK → 確認画面で「はい」を押す

#### 管理者PowerShellで実行
```PowerShell
New-NetFirewallRule -DisplayName "IIS HTTP" -Direction Inbound -LocalPort 80 -Protocol TCP -Action Allow
```

#### `C:\inetpub\wwwroot` に `index.php` を作成
```php
<?php
phpinfo();

```
 ブラウザで `http://localhost/index.php` にアクセス
 PHP情報が表示されれば成功です

 
#### LAN内からアクセス（`ipconfig` → IPv4をしらべて）
http://192.168.xxx.xxx/


#### IIS を自動起動しないようにする（推奨）
管理者でコマンドプロンプト開いて以下実行
```
sc config W3SVC start= demand
```
設定確認
```
sc qc W3SVC
```
`START_TYPE` が `DEMAND_START` なら OK（手動起動）。

使いたいとき（手動起動）
```
net start W3SVC
```

終了時（手動停止）
```
net stop W3SVC
```

